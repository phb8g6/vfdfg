class enen_LongMan{constructor(e){this.options=e,this.maxexample=2,this.word=""}async displayName(){let e=await api.locale();return-1!=e.indexOf("CN")?"柯林斯英英词典":-1!=e.indexOf("TW")?"柯林斯英英词典":"LongMan Dictionary"}setOptions(e){this.options=e,this.maxexample=e.maxexample}async findTerm(e){this.word=e;let n=await Promise.all([this.findLongMan(e)]);return[].concat(...n).filter(e=>e)}async findLongMan(e){let n=[];if(!e)return n;function t(e){return e?e.innerText.trim():""}let r="https:// www.ldoceonline.com/dictionary/"+encodeURIComponent(e),a="";try{let e=await api.fetch(r);a=(new DOMParser).parseFromString(e,"text/html")}catch(e){return[]}let s=a.querySelector(".dictionary.Cob_Adv_Brit");if(!s)return n;let i=t(s.querySelector(".h2_entry")),o=t(s.querySelector(".pron")),l=s.querySelector(".word-frequency-img"),p=l?l.dataset.band:"",c=p?`<span class="band">${"●".repeat(Number(p))}</span>`:"",d=s.querySelector("a.hwd_sound"),u=d?[d.dataset.srcMp3]:[],g=[],m=s.querySelectorAll(".hom")||[];for(const e of m){let n=t(e.querySelector(".pos"));n=n?`<span class="pos">${n}</span>`:"";let r=t(e.querySelector(".sense .def"));if(!r)continue;let a="";a+=`${n}${`<span class='tran'>${r=`<span class='eng_tran'>${r=r.replace(RegExp(i,"gi"),"<b>$&</b>")}</span>`}</span>`}`;let s=e.querySelectorAll(".sense .cit.type-example")||"";if(s.length>0&&this.maxexample>0){a+='<ul class="sents">';for(const[e,n]of s.entries()){if(e>this.maxexample-1)break;let r=t(n)?t(n).replace(RegExp(i,"gi"),"<b>$&</b>"):"";a+=r?`<li class='sent'><span class='eng_sent'>${r}</span></li>`:""}a+="</ul>"}a&&g.push(a)}let x=this.renderCSS();return n.push({css:x,expression:i,reading:o,extrainfo:c,definitions:g,audios:u}),n}renderCSS(){return"\n\t            <style>\n\t                span.band {color:#e52920;}\n\t                span.pos  {text-transform:lowercase; font-size:0.9em; margin-right:5px; padding:2px 4px; color:white; background-color:#0d47a1; border-radius:3px;}\n\t                span.tran {margin:0; padding:0;}\n\t                span.eng_tran {margin-right:3px; padding:0;}\n\t                span.chn_tran {color:#0d47a1;}\n\t                ul.sents {font-size:0.8em; list-style:square inside; margin:3px 0;padding:5px;background:rgba(13,71,161,0.1); border-radius:5px;}\n\t                li.sent  {margin:0; padding:0;}\n\t                span.eng_sent {margin-right:5px;}\n\t                span.chn_sent {color:#0d47a1;}\n\t            </style>"}}